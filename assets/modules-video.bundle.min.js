import{L as e}from"./shared-import-index.bundle.min.js";window.ThemeModule_Video=(t,i,s,a)=>({enabled:!1,shown:!1,id:t,type:i,host:s,autoplay:a,youtubeReady:!1,productMediaWrapper:null,ytPlayer:null,vimeoPlayer:null,playing:!1,init(){null!==this.$el.closest(".splide")&&(this.id=this.id+"--splide"),this.$watch("enabled",(e=>{this.$nextTick((()=>{this.shown=e}))})),document.addEventListener("touchstart",(function(){window.setTouch()})),document.body.addEventListener("pauseAllMedia",(e=>{null!==e.detail?e.detail.id!==this.id&&this.pause():this.pause()})),this.productMediaWrapper=this.$root.closest("[data-product-single-media-wrapper]"),null!==this.productMediaWrapper?(this.setUpProductMediaListeners(),this.setUpMatchMedia()):this.autoplay&&this.enableVideo()},enableVideo(){this.enabled=!0,this.$nextTick((()=>{if("video"===this.type){this.$root.querySelector(".video").onplay=()=>{this.playing=!0,this.dispatchPauseEvent()}}else{if("youtube"===this.host){const t=this.$root.querySelector(".js-youtube"),i=()=>{this.ytPlayer=new YT.Player(t,{events:{onStateChange:function(e){1===e.data&&(this.playing=!0,this.dispatchPauseEvent())}.bind(this)}})};"undefined"!=typeof YT?i():(document.body.addEventListener("youtubeiframeapiready",(()=>{this.youtubeReady=!0,i()})),e.load("youtubeSdk"))}if("vimeo"===this.host){const t=this.$root.querySelector(".js-vimeo"),i=()=>{this.vmPlayer=new Vimeo.Player(t),Alpine.raw(this.vmPlayer).on("play",(()=>{this.playing=!0,this.dispatchPauseEvent()}))};"undefined"!=typeof Vimeo?i():e.load("vimeoSdk",(()=>{if("undefined"!=typeof Vimeo)i();else{let e=0;const t=setInterval((()=>{"undefined"!=typeof Vimeo?(clearInterval(t),i()):(e++,7===e&&clearInterval(t))}),300)}}))}}}))},dispatchPauseEvent(){document.body.dispatchEvent(new CustomEvent("pauseAllMedia",{detail:{id:this.id}}))},pause(){if(!this.enabled)return!1;if("video"===this.type)this.$root.querySelector("video").pause();else switch(this.host){case"youtube":this.ytPlayer.pauseVideo();break;case"vimeo":Alpine.raw(this.vmPlayer).pause()}this.playing=!1},play(){if(!this.enabled)return!1;if("video"===this.type)this.$root.querySelector("video").play();else switch(this.host){case"youtube":this.ytPlayer.playVideo();break;case"vimeo":Alpine.raw(this.vmPlayer).play()}this.playing=!0,this.dispatchPauseEvent()},setUpProductMediaListeners(){this.productMediaWrapper.addEventListener("mediaHidden",(()=>{this.pause()})),this.productMediaWrapper.addEventListener("xrLaunch",(()=>{this.pause()})),this.productMediaWrapper.addEventListener("mediaVisible",(()=>{window.isTouch()||(!this.enabled&&this.autoplay?this.enableVideo():this.play())}))},setUpMatchMedia(){window.matchMedia("(min-width: 768px)").addEventListener("change",(()=>{null===this.$el.offsetParent&&this.pause()}))}});
