import{E as e}from"./shared-import-splide.esm.bundle.min.js";function t(t){const{on:i,off:o,bind:n,unbind:d}=e(t);function a(e){const i=t.Components.Slides.filter((t=>t.slide.dataset.mediaId===e.toString()));i.length&&t.go(i[0].index)}function r(e){const i=t.Components.Slides.getAt(e);if(!i)return;const o=i.slide.querySelector("[data-product-single-media-wrapper]");t.root.querySelector(".splide__track").style.maxHeight=o.offsetHeight+"px"}t.root.addEventListener("click",(e=>{e.target.classList.contains("splide__pagination__page")&&(t.paginationClicked=!0)})),n(document.body,"cascade:product:variantchange",(e=>{if(e.target.contains(t.root)&&void 0!==e.detail.variant.featured_media){a(e.detail.variant.featured_media.id)}}));const s=debounce((e=>{r(t.index)}),150);function c(){t.root.querySelectorAll("[aria-hidden]").forEach((e=>{e.removeAttribute("aria-hidden")})),d(document.body,"cascade:product:variantchange")}function l(){if(t.root.dataset.firstMedia)if(t.splides){const e=[];for(const i of t.splides){const t=new Promise(((e,t)=>{i.on("mount",e())}));e.push(t)}Promise.all(e).then((()=>{a(t.root.dataset.firstMedia)}))}else a(t.root.dataset.firstMedia);r(t.index)}function u(e,i){const o=t.Components.Slides,n=o.getAt(i).slide.querySelector("[data-product-single-media-wrapper]"),d=o.getAt(e).slide.querySelector("[data-product-single-media-wrapper]");n&&n.dispatchEvent(new CustomEvent("mediaHidden")),d&&d.offsetHeight&&d.dispatchEvent(new CustomEvent("mediaVisible"))}function m(e){r(e)}return n(window,"resize",s),{mount(){i("mounted",l),i("moved",u),i("move",m),i("destroy",c)}}}export{t as SplideProduct};
