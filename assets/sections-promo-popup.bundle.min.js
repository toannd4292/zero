import{a as e}from"./shared-import-js.cookie.bundle.min.js";document.addEventListener("alpine:init",(()=>{Alpine.data("ThemeSection_PromoPopup",(o=>({delay:o.delay,frequency:o.frequency,enabled:o.enabled,sectionId:o.sectionId,cookie:e.get("promoPopup"),mounted(){"/challenge"!==window.location.pathname&&(initTeleport(this.$root),Alpine.store("modals").register("promoPopup","promo"),document.body.addEventListener("promo-is-closed",(o=>{e.set("promoPopup","opened",{path:"/",expires:this.frequency})})),this.$root.querySelectorAll(".errors,.form-message").length>0&&this.open(),this.$root.querySelectorAll(".form-message").length>0&&e.set("promoPopup","opened",{path:"/",expires:200}),Shopify.designMode?(window.theme.designMode.selected===this.sectionId&&(!0===this.enabled?this.open():Alpine.store("modals").close("promoPopup")),document.addEventListener("shopify:section:select",(e=>{e.target.contains(this.$root)&&this.enabled&&this.open()})),document.addEventListener("shopify:section:deselect",(e=>{e.target.contains(this.$root)&&this.$store.modals.close("promoPopup")}))):"opened"!==this.cookie&&setTimeout((()=>{this.open();const e=o=>{"ESCAPE"===o.code.toUpperCase()&&(this.$store.modals.close("promoPopup"),document.body.removeEventListener("keydown",e))};document.body.addEventListener("keydown",e)}),1e3*this.delay))},open(){this.$store.modals.open("promoPopup"),this.$focus.first()}})))}));
